<div class="flex h-screen overflow-visible">
  <app-sidenav-ws class="relative z-20"></app-sidenav-ws>

  <!-- Main content -->
  <div class="flex-1 flex flex-col overflow-visible">
    <app-header-ws class="relative z-0"></app-header-ws>

    <main class="relative flex-1 overflow-y-auto p-6 bg-gray-50">
      <!-- Spinner de carga -->
      <div
        *ngIf="isLoading"
        class="absolute inset-0 bg-white/60 backdrop-blur-sm z-50 flex items-center justify-center"
      >
        <div class="w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
      </div>

        <!-- Error -->
        <div *ngIf="!isLoading && !archivosInfo" class="text-red-500 mt-4">
          No se pudo cargar la visualización.
        </div>
      <div class="shadow-lg rounded-lg p-6 border border-sky-200 bg-white">
        <!-- Título principal -->
        <h1 class="text-center text-sky-500 text-xl font-semibold mb-2">
          Predicción de Cáncer Cerebral
        </h1>
        <p class="text-center text-sm text-gray-500 mb-4">
          Sube imágenes de resonancia magnética para obtener un análisis
          predictivo.
        </p>

        <!-- Panel de carga -->
        <div
          class="border border-gray-300 rounded-lg p-8 bg-white-50 text-left"
        >
          <h2 class="text-xl font-semibold text-gray-800 mb-1">
            Subir Imágenes
          </h2>
          <p class="text-sm text-gray-500 mb-6">
            Sube imágenes de resonancia magnética en formato T1, T1C, T2F y T2W.
          </p>

          <!-- Zona arrastrar y seleccionar -->
          <div
            *ngIf="showUploadZone"
            class="border border-dashed border-sky-200 rounded-lg p-8 bg-sky-50 flex flex-col items-center justify-center space-y-4"
          >
            <div class="bg-sky-100 p-4 rounded-full">
              <lucide-icon
                [name]="icons.Upload"
                class="w-10 h-10 text-sky-400"
              ></lucide-icon>
            </div>
            <p class="font-semibold text-gray-700">
              Arrastra y suelta tus archivos aquí
            </p>
            <p class="text-gray-500 text-sm">
              O haz clic para seleccionar archivos
            </p>

            <label
              class="cursor-pointer inline-flex items-center px-4 py-2 bg-sky-500 text-white text-sm font-medium rounded hover:bg-sky-600 transition"
            >
              <input
                type="file"
                accept=".nii.gz"
                class="hidden"
                multiple
                (change)="onFileChange($event)"
                #fileInput
              />
              Seleccionar archivos
            </label>

            <p *ngIf="errorMessage" class="text-red-500 text-sm mt-4">
              {{ errorMessage }}
            </p>
          </div>

          <!-- Lista de archivos seleccionados -->
          <div *ngIf="archivosInfo.length > 0" class="mt-6 w-full">
            <h3 class="text-sm font-medium text-gray-700 mb-2">
              Archivos seleccionados:
            </h3>
            <ul class="text-sm text-gray-600 list-disc list-inside space-y-1">
              <li *ngFor="let archivo of archivosInfo">
                {{ archivo.nombre }} – {{ archivo.tamano }}
              </li>
            </ul>
          </div>
        </div>

        <!-- Botón continuar -->
        <div class="flex justify-end mt-6">
          <button
            *ngIf="fileSelected && archivosInfo.length > 0"
            routerLink="/upload/visualization"
            class="px-4 py-2 text-sm bg-sky-500 text-white rounded hover:bg-sky-600 transition"
          >
            Continuar
          </button>
        </div>
      </div>
    </main>
  </div>
</div>
