<!-- image.component.html -->
<div class="flex h-screen overflow-visible">
  <app-sidenav-ws class="relative z-20"></app-sidenav-ws>

  <!-- Main content -->
  <div class="flex-1 flex flex-col overflow-visible">
    <app-header-ws class="relative z-0"></app-header-ws>

    <main class="flex-1 overflow-y-auto p-6 bg-gray-50">
      <div class="shadow-lg rounded-lg p-6 border border-sky-200 bg-white">
        <h1 class="text-center text-sky-500 text-2xl font-semibold mb-4">
          Predicción de Cáncer Cerebral
        </h1>
        <p class="text-center text-sm text-gray-500 mb-6">
          Sube imágenes de resonancia magnética para obtener un análisis predictivo.
        </p>

        <!-- split-container -->
        <div class="flex flex-col lg:flex-row gap-6">
          <!-- Panel izquierdo -->
          <div class="flex-1 bg-sky-50 rounded-lg p-6 space-y-6">
            <!-- Subida de Modalidades -->
            <div>
              <label
                for="fileInput"
                class="inline-block px-4 py-2 bg-sky-500 text-white rounded cursor-pointer hover:bg-sky-600 transition"
              >
                Subir Modalidades T1, T1C, T2F y T2W
              </label>
              <input
                type="file"
                id="fileInput"
                name="files"
                multiple
                accept=".nii.gz"
                class="hidden"
                (change)="onFileChange($event)"
              />
              <p *ngIf="errorMessage" class="text-red-500 text-sm mt-2">
                {{ errorMessage }}
              </p>
            </div>

            <!-- Selección de gráfica con <select> puro -->
            <div>
              <h2 class="text-lg font-medium text-gray-800 mb-2">Selecciona una Gráfica</h2>
              <select
                [(ngModel)]="selectedGraph"
                class="w-full max-w-xs block bg-white border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-400"
              >
                <option value="" disabled>-- Elige una opción --</option>
                <option *ngFor="let g of graphOptions" [value]="g.value">
                  {{ g.viewValue }}
                </option>
              </select>
            </div>

            <!-- Visualización gráfica 2D -->
            <div *ngIf="selectedGraph === 'graph6' && htmlUrl6">
              <h3 class="text-md font-semibold text-gray-700 mb-2">
                Visualización Interactiva de Modalidades
              </h3>
              <iframe
                [src]="htmlUrl6"
                class="w-full h-64 border rounded"
              ></iframe>
            </div>

            <!-- Visualización gráfica 3D -->
            <div *ngIf="selectedGraph === 'graph3D' && htmlUrl3D">
              <h3 class="text-md font-semibold text-gray-700 mb-2">
                Visualización Cerebral 3D
              </h3>
              <iframe
                [src]="htmlUrl3D"
                class="w-full h-64 border rounded"
              ></iframe>
            </div>
          </div>

          <!-- Panel derecho -->
          <div class="flex-1 bg-white rounded-lg p-6 space-y-6 border border-gray-200 flex flex-col">
            <!-- Resultados de la predicción -->
            <div *ngIf="prediccion_clasificacion" class="mb-4">
              <h2 class="text-lg font-medium text-gray-800 mb-2">
                Resultados de la Predicción
              </h2>
              <p class="text-gray-700">{{ prediccion_clasificacion }}</p>
            </div>

            <!-- Botón Regresar al pie -->
            <!-- <div class="mt-auto">
              <button
                (click)="navigateToChips()"
                class="w-full text-center px-4 py-2 bg-sky-500 text-white rounded hover:bg-sky-600 transition"
              >
                Regresar
              </button>
            </div> -->
          </div>
        </div>
        <!-- fin split-container -->
      </div>
    </main>
  </div>
</div>
